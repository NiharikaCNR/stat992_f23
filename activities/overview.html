<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>activity_plans</title>
    <meta charset="utf-8" />
    <script src="libs/header-attrs-2.25/header-attrs.js"></script>
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link rel="stylesheet" href="css/xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">


# STAT 679 / 992: Statistical Data Visualization

## Fall 2023



---

# September 7, 2023

1. Review syllabus
1. Review class resources
1. In-Class Exercise 0.1

---

### Welcome!!

I'm excited to share this course with you this semester. There are few
activities that engage creative, quantitative, and critical thinking skills all
at once, but data visualization is one of them.

Nothing makes my day like a good data visualization, and I look forward to
seeing those that you create.

---

### Syllabus

* Learning outcomes
* Teaching team and office hours
* Assessments
* Grading

---

### Learning Outcomes

In this class, you will learn to...

1. Draw from a **catalog of visual encodings** to support specific visual comparisons in temporal, geospatial, network, hierarchical, high-dimensional count, text, and uncertain data and demonstrate facility implementing them using the R and javascript programming languages.
2.	Draw from a **catalog of interactivity patterns** to compose visualizations that
respond to user’s dynamic queries.
3.	Using the vocabulary of data visualization, **analyze and critique visual designs**.

---

### Learning Outcomes

In this class, you will learn to...

4.	Given a data analysis problem and initial design solution, iteratively **refine visual encodings and interactivity** idioms from across the design space until a satisfactory solution is discovered.
5.	**Navigate the data visualization research literature**, summarize the contributions of a specific methodological proposal, and evaluate their applicability in specific problem contexts.

---

### Office Hours

We will announce in-person and virtual office hours depending on the results of
this poll: https://go.wisc.edu/93oh27

---

### Assessments

* In-class exercises and discussions graded for completeness
* 4 problem sets 
* 3 group project reports and 1 presentation
  - Teams of 4 - 5 people
* 1 midterm exam

---

### Grading

* Problem Sets: 35%
* Group Project: 25%
* In-Class Exercises: 20%
* Midterm: 20%

---

### Canvas Page Walkthrough

&lt;img src="figures/canvas.png" width="650" style="display: block; margin: auto;" /&gt;

---

### Class Resources

1. [Canvas page](https://canvas.wisc.edu/courses/374041)
  - Links to all other resources
1. [Readings](https://drive.google.com/file/d/16jr5MlX8axfDVZ3kS4vZuWzqDOpj1Wng/view?usp=sharing)
1. [Exercises](https://canvas.wisc.edu/courses/374041/files?preview=33640181)
1. [Online notes](https://krisrs1128.github.io/stat992_f23/website/docs/)
1. [Online recordings](https://mediaspace.wisconsin.edu/) (also linked in notes)

---

### Last Year's Course Reflections

* [https://go.wisc.edu/vwie77](https://go.wisc.edu/vwie77)

---

### Questions?

Also feel free to speak with me after class.

---

### Send me visualizations

If over the course of the semester you find a data visualization that you think
might be interesting to the class, send me a link! There's a lot that can be
learned through imitation.

Examples: 
* https://book.rwithoutstatistics.com/data-viz-chapter.html
* https://ijeamaka.art/portfolio/radial_patterns/
* https://observablehq.com/@visionscarto/potential-dollar-flows?collection=@visionscarto/30daymapchallenge
* http://nbremer.github.io/urbanization/

---

### Exercise 0.1

1. Introduce yourself to at least two people who you do not already know.

1. Submit a response to [Formulating Questions] in the exercise sheet.

1. Share your chosen datasets in small groups.

[Formulating Questions] Pick a dataset from
[TidyTuesday](https://github.com/rfordatascience/tidytuesday#datasets), [Data Is
Plural](https://docs.google.com/spreadsheets/d/1wZhPLMCHKJvwOkP4juclhjFgqIY8fQFMemwKL2c64vk/edit#gid=0),
[Kaggle Datasets](https://www.kaggle.com/datasets), [Google Dataset
Search](https://datasetsearch.research.google.com/), or your own personal
studies that you would like to visualize this semester. What makes you
interested in this dataset? Please provide a link, so we can refer to the data in future sessions.

---

# September 12, 2023

1. Exercise review
1. In-Class Demo [City Temperatures]
1. In-Class Exercise 1.1

---

### Announcements

1. Office hours will be held Mondays 3:15 - 4:30pm and Wednesdays 10am -
11:15am. You can join in person at Medical Sciences Center 7225C or through
Zoom.

1. The description for how to form groups is in Project Milestone 0. If you do
not form a team by the deadline, you will be randomly assigned one.

1. Problem set 1 is online.

1. Project Milestone 0 (Forming Groups) is due on September 18.

---

### Beautiful Visualizations - Comments?

.pull-left[
&lt;img src="figures/exoplanets.png" width=400/&gt;
]

.pull-right[
[Source](https://www.behance.net/gallery/78642081/IAU100-exhibition-data-visualization-and-graphics)

[Plot background](https://stackoverflow.com/questions/51255832/how-to-add-an-image-on-ggplot-background-not-the-panel)
]

---

### Exercise Review

Let's analyze the exercise results together.

[https://go.wisc.edu/fzn067](https://go.wisc.edu/fzn067)

---

### In-Class Demo 1.1

[https://go.wisc.edu/fzn067](https://go.wisc.edu/fzn067)

We'll also see how you can submit results using Rmarkdown.

---

### Exercise 1.1

The data below measures properties of various Antarctic penguins.


```r
penguins &lt;- read_csv("https://uwmadison.box.com/shared/static/ijh7iipc9ect1jf0z8qa2n3j7dgem1gh.csv")
```

Create a single plot that makes it easy to answer both of these questions,
(i) How is bill length related to bill depth within and across species? (ii)
On which islands are which species found?

Read about [Simpson's
paradox](https://en.wikipedia.org/wiki/Simpson%27s_paradox) and summarize it
in your own words. Then, explain how part (i) provides a real-world example
of this paradox.

If you finish early -- can you think of an alternative encoding that
visualizes the same information? How do the encodings compare and contrast
with one another?

---

# September 14, 2023

1. Exercise review
1. In-Class Demo [Plant growth]
1. (If Time) Discussion [When2meet]
1. [In-Class Exercise 1.2]

---

### Announcements

1. The description for how to form groups is in Project Milestone 0. If you do
not form a team by the deadline, you will be randomly assigned one.

1. Problem set 1 is online.

1. Project Milestone 0 (Forming Groups) is due on September 18.


---

### Beautiful Visualizations - Comments?

.pull-left[
&lt;img src="figures/djokovic.jpeg" width=350/&gt;
]

.pull-right[
[Source](https://ig.ft.com/sites/novak-djokovic-the-best-tennis-season-ever/)
]

---

### Exercise Review

This is an exercise in compactly encoding a mix of continuous (bill length and
depth) and nominal (species and island) variables. There are several approaches
possible, and there are trade-offs between them,

  * Color and shape: It's convenient to place all data into the same space, but
  shapes can be hard to read.
  * Color combinations: It's easier to distinguish colors than shapes, but requires
  continually looking up which color is which combination.
  * Faceting: Easier to compare combination, but each panel gets less space.
  
---

### Exercise Review


```r
ggplot(penguins) +
  geom_point(aes(bill_length_mm, bill_depth_mm, col = species, shape = island))
```

&lt;img src="overview_files/figure-html/unnamed-chunk-3-1.png" width="600" style="display: block; margin: auto;" /&gt;

---


```r
ggplot(penguins) +
  geom_point(aes(bill_length_mm, bill_depth_mm, col = species, shape = island)) +
  scale_color_brewer(palette = "Set2") +
  scale_shape_manual(values = c(16, 0, 8)) +
  labs(
    x = "Bill Depth",
    y = "Bill Length"
  )
```

&lt;img src="overview_files/figure-html/unnamed-chunk-4-1.png" width="550" style="display: block; margin: auto;" /&gt;
---


```r
ggplot(penguins) +
  geom_point(aes(bill_length_mm, bill_depth_mm, col = interaction(species, island))) +
  scale_color_brewer(palette = "Set2") +
  theme(strip.text = element_text(size = 18)) +
  labs(
    x = "Bill Depth",
    y = "Bill Length"
  )
```

&lt;img src="overview_files/figure-html/unnamed-chunk-5-1.png" width="550" style="display: block; margin: auto;" /&gt;

---

### Exercise Review


```r
ggplot(penguins) +
  geom_point(aes(bill_length_mm, bill_depth_mm, col = species)) +
  facet_wrap(~ island)
```

&lt;img src="overview_files/figure-html/unnamed-chunk-6-1.png" width="1000" style="display: block; margin: auto;" /&gt;

---

### Exercise Review


```r
ggplot(penguins) +
  geom_point(aes(bill_length_mm, bill_depth_mm, col = species)) +
  facet_wrap(~ island) +
  scale_color_brewer(palette = "Set2") +
  theme(strip.text = element_text(size = 18)) +
  labs(
    x = "Bill Depth",
    y = "Bill Length"
  )
```

&lt;img src="overview_files/figure-html/unnamed-chunk-7-1.png" width="800" style="display: block; margin: auto;" /&gt;

---

### Exercise Review


```r
ggplot(penguins, aes(bill_length_mm, bill_depth_mm)) +
  geom_point(aes(col = species, shape = island)) +
  stat_smooth(aes(col = species), method = "lm", se = FALSE) +
  stat_smooth(method = "lm", se = FALSE, col = "#0c0c0c") +
  scale_color_brewer(palette = "Set2") +
  scale_shape_manual(values = c(16, 0, 8)) +
  theme(strip.text = element_text(size = 18)) +
  labs(
    x = "Bill Depth",
    y = "Bill Length"
  )
```

&lt;img src="overview_files/figure-html/unnamed-chunk-8-1.png" width="320" style="display: block; margin: auto;" /&gt;

---

### Exercise Review


```r
ggplot(penguins, aes(bill_length_mm, bill_depth_mm)) +
  geom_point(aes(col = species)) +
  stat_smooth(aes(col = species), method = "lm", se = FALSE) +
  stat_smooth(method = "lm", se = FALSE, col = "#0c0c0c") +
  facet_wrap(~ island) +
  scale_color_brewer(palette = "Set2") +
  theme(strip.text = element_text(size = 18)) +
  labs(
    x = "Bill Depth",
    y = "Bill Length"
  )
```

&lt;img src="overview_files/figure-html/unnamed-chunk-9-1.png" width="650" style="display: block; margin: auto;" /&gt;

---

### Discussion [When2Meet]

* With your neighbors, work through (a - c) of [When2Meet] on the exercise
sheet
* I will ask groups to share brief a summary of their discussions with the rest
of the class
* The question is included on the next slide

---

In addition to being a scheduling tool, When2Meet polls provide a heatmap
visualization of respondent availability. In this exercise, use the results from
our [office hour poll](https://www.when2meet.com/?16334941-sIMyb) to evaluate
the properties of this visualization.

  a. What are two concrete questions that the heatmap visualization is
  effective at answering? Why do you think this?
  
  b. What are two concrete questions that the heatmap visualization is *not* 
  effective at answering? Why do you think this?
  
  c. Describe an alternative static or interactive visual design that is
  better suited to one of the questions you identified in (b).
  
  d. The dataset at [this link](https://raw.githubusercontent.com/krisrs1128/stat679_code/main/examples/week1/when2meet_679f22.csv) include responses from our poll. Columns 1 - 35 represent students, and 1/0
  denotes whether the student is or is not available. Implement a version of
  your proposed visual design from (c).
  
---

### In-Class Demo 1.2

[https://go.wisc.edu/7if91e](https://go.wisc.edu/7if91e)

We'll also see how you can submit results using Rmarkdown.

---

### Exercise 1.2

In teams of 2 - 4 people, work through [Concept Map] in the exercise sheet. For
submission, include a photo of your concept map and summarize the main points
from your discussion.

[Concept Map] Prepare a concept map to summarize the last week of reading
material. An effective submission will include a thorough coverage of both
abstract concepts and practical examples, summarized concisely into short
phrases. It will also include well-justified links between nodes, with text
explanations for edges whose interpretation might not be obvious at first.

---

# September 19, 2023

1. Exercise review
1. Code demo [Improving an App]
1. [In-Class Exercise 2.1]

---

### Announcements

1. Problem Set 1 is due October 2
1. Project Milestone 1 is due October 16
1. Please remember that there are course recordings linked to the notes

---

### Discussion [When2Meet]

* With your neighbors, work through (a - c) of [When2Meet] on the exercise
sheet
* I will ask groups to share brief a summary of their discussions with the rest
of the class
* The question is included on the next slide

---

In addition to being a scheduling tool, When2Meet polls provide a heatmap
visualization of respondent availability. In this exercise, use the results from
our [office hour poll](https://www.when2meet.com/?20896504-xidOG) to evaluate
the properties of this visualization.

  a. What are two concrete questions that the heatmap visualization is
  effective at answering? Why do you think this?
  
  b. What are two concrete questions that the heatmap visualization is *not* 
  effective at answering? Why do you think this?
  
  c. Describe an alternative static or interactive visual design that is
  better suited to one of the questions you identified in (b).
  
  d. The dataset at [this link](https://raw.githubusercontent.com/krisrs1128/stat679_code/main/examples/week1/when2meet_679f22.csv) include responses from our poll. Columns 1 - 35 represent students, and 1/0
  denotes whether the student is or is not available. Implement a version of
  your proposed visual design from (c).

---

### Exercise Review

A few common themes emerged across most submissions,

* The distinctions between data, geometry, and encoding in ggplot2
* Descriptions of what make an encoding / visualization effective
  - Clear comparisons, overall readability, orientation around specific tasks
* Description of the different ggplot2 geometry layers
* Examples of faceting and when it can be helpful

---

### In-Class Demo [Improving an App]

* This exercise uses reactive expressions to make messy (but still functional)
Shiny apps more readable

* [https://go.wisc.edu/7mh8l5](https://go.wisc.edu/7mh8l5)

---

### Exercise 2.1

[Olympics Interactive App] 
 
 Hints:
 
   *  For part (a), a `renderPlot()` server element needs to be rerun each time
   the sports `selectInput` has been changed.
   * For part (b), consider how we shared filtered data across server elements
   in the penguin example today.
 
---

### September 21, 2023

1. Exercise review
1. Code demo [California Wildfires]
1. [In-Class Exercise 2.2]

---

### Announcements

1. Problem Set 1 is due October 2
1. Project Milestone 1 is due October 16

---

### Beautiful Visualizations

.pull-left[
&lt;img src="figures/isee.png"/&gt;
]

.pull-right[
Interactive SummarizedExperiment Explorer

* [Publication](https://bioconductor.org/packages/release/bioc/html/iSEE.html#:~:text=doi%3A10.12688/f1000research.14966.1)
* [Example](http://shiny.imbei.uni-mainz.de:3838/iSEE/)
* [Source Code](https://github.com/iSEE/iSEE)
]

---

### Exercise Review

**Part (a)**: The following server code creates a "selected" column specifying
whether the athlete competes in one of the selected sports.


```r
server &lt;- function(input, output) {
  current_data &lt;- reactive({
    olympics %&gt;%
      mutate(selected = Sports %in% input$dropdown)
  })
  
  output$scatterplot &lt;- scatterplot(current_data())
}
```

---

### Exercise Review

&lt;iframe src="https://data-viz.it.wisc.edu/content/5c919ba9-52e0-4f3a-ba35-47a58eed16fd" width=800 height=500/&gt;

---

### Exercise Review

**Part (b)**: We can introduce a `dataTableOutput` to print the selected athletes.


```r
ui &lt;- fluidPage(
  selectInput("dropdown", "Select a Sport", choices = unique(olympics$Sport), multiple = TRUE),
  plotOutput("scatterplot"),
  dataTableOutput("table")
)
```

---

### Exercise Review

We can use the same reactive as before to populate the table.


```r
server &lt;- function(input, output) {
  updated &lt;- reactive({
    olympics %&gt;%
      mutate(selected = Sport %in% input$dropdown)
  })
  
  output$scatterplot &lt;- renderPlot(scatterplot(updated()))
  output$table &lt;- renderDataTable(
    updated %&gt;% filter(selected)
  )
}
```

---

### Exercise Review

&lt;iframe src="https://data-viz.it.wisc.edu/content/04140b59-14cd-4c04-91b2-a0c64e6ee29c" width=800 height=500/&gt;

---

### Exercise Review

.pull-left[
* This is also our first visualization implementing something like a "Focus +
Context Principle." 
* We're able to zoom into a few elements of interest without
losing the overall context.
]

.pull-right[
&lt;iframe src="https://player.vimeo.com/video/363453522?h=ea9887b2e6" width="610" height="330" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;&lt;a href="https://vimeo.com/363453522"&gt;[VIS19 Preview] Periphery Plots for Contextualizing Heterogeneous Time-Based Charts (short paper)&lt;/a&gt;&lt;/p&gt;
]

---

### Code Demo

* This exercise will give some more practice with Shiny visualization. We'll
look at a dataset of California Wildfires between 2013 and 2019.

* [Link]

---

### In-Class Exercise

In your project group, work through [Reactivity Graphs] in the exercise sheet.

For submission, have one member of your team submit a short video of the
original interactive visualization and a sketch of the reactive graph you
derived from it.

Additionally:  Identify one point of common confusion across your group. Include
this in your write-up so that we can go over the most common ones during lecture
on Monday.

---

### September 26, 2023

1. [In-Class Demo 3.1]
1. [In-Class Exercise 3.1]

---

### Announcements

1. Problem Set 1 is due October 2
1. Project Milestone 1 is due October 16

---

### Shiny Apps in Problem Sets

If you tried compiling a Shiny app within an rmarkdown document, you probably
saw a message like the one below,

&lt;img src="figures/shiny_rmarkdown.png"/&gt;

You did not make a mistake! Shiny doesn't allow you to host an app within an
Rmarkdown document, unfortunately.

---

### Shiny Apps in Submissions

To let us grade your Shiny apps within the problem sets, you have two options,

1. Include a screen recording of your app along with the code you used to create
it. You do not need to share the code as R scripts -- we will just read the code
as it's embedded in the main write-up.

1. You could try hosting your app on a public site. UW Madison has an Rstudio
Connect account, which lets you host apps for free. You can sign up
[here](https://it.wisc.edu/news/rstudio-team-pilot/).

---

### Beautiful Visualizations

[https://alhill.shinyapps.io/COVID19seir/](https://alhill.shinyapps.io/COVID19seir)

[https://peopleofthepandemicgame.com/](https://peopleofthepandemicgame.com/)

&lt;img src="figures/covid19seir.png" width = 800/&gt;

---

### In-Class Demo

* This exercise uses extends our earlier wildfires app to use graphical inputs

* Demo link: [https://go.wisc.edu/34u1t5](https://go.wisc.edu/34u1t5)

---

### In-Class Demo

[https://go.wisc.edu/3uv12r](https://go.wisc.edu/3uv12r)

Right now, the dotplot responds to the brushed histogram. However,

  * The dotplot does not allow any user inputs.
  * The histogram does not reflect year or user selections.

Imagine someone came to your statistical consulting hours with this application.
They want your expertise to improve the app so that it conveys more information.
How would you approach this? What might be some first steps towards
implementation?

Take 7 minutes to discuss with a neighbor, then we will regroup and share.

---

### In-Class Exercise

[Birds Brushed Scatterplot] - Only part (a)

Hint: This problem is similar to the example in Week 3 - 2: Brush Inputs.

---

### September 28, 2023

1. Project Strategies + Q&amp;A
1. In-Class Demo
1. In-Class Exercise

---

### Announcements

1. This is our last session in Module A1. If you are seeking additional
resources about or have questions about R, ggplot2, or Shiny, please reach out.
1. Problem Set 1 is due October 2
1. Project Milestone 1 is due October 16
1. The deadline for Exercise 3.1 was extended to Tuesday. You will be able to
re-submit without a penalty.

---

The code in Exercise 3.1 had been cutoff. Here is the full definition of `bird_summaries`.


```r
bird_summaries &lt;- birds %&gt;%
  group_by(genus) %&gt;%
  summarise(
    across(
      c("Asymmetry", "Ellipticity", "AvgLength (cm)", 
        "Number of images", "Number of eggs"), 
      list(MEAN = mean, STANDARD_DEVIATION = sd))) %&gt;%
  arrange(-Ellipticity_MEAN)
```


---

### Project Reflections

1. How should you approach your course project?
1. Hopefully, these reflections will be useful for your future projects too
1. Please ask questions, this will work better as a discussion

---

### Conceptualization: Storytelling

The most compelling projects are structured like stories.

Opening: What is the setting? Who are the main characters?

Conflict: How is the state of the world unsatisfactory?

Action: How was the conflict resolved?

Resolution: What have we learned more generally?

---

### Conceptualization: Community

1. In the area that you choose to study, who are your intellectual peers?
1. A common problem in data science projects are that they become too abstract /
have no clear intended audience.
1. The project should be interesting because of what it says about real world
phenomena which are interesting within your community -- don't talk about data
without context.

---

### Conceptualization: Synthesis

1. No problems are solved in a vacuum. What ideas are you building from?
1. The most creative projects draw from sources that were not obviously
relevant, but which later turn out to be.

---

### Implementation: Reading

1. For both community and synthesis, it is very helpful to read extensively
1. This helps you understand the standards of the community (or communities) you
are working in.
1. It also provides source material for problem solving.
1. Today's in-class exercise provides more concrete suggestions for how to go
about identifying reading material

---

### Implementation: Prototyping

1. It is much better to explore a variety of designs before committing to one
specific approach.
1. This is one of the reasons why having a well-defined problem is important --
it creates a center around which many approaches can be explored

.center[
&lt;img src="figures/design-space.png" width=800/&gt;
]

---

### Implementation: Feedback

1. Some of the most important data you can get during a project is feedback from
your peers
1. Their responses may reveal unwarranted assumptions you have made or point you
towards a previously unnoticed path forward

---

### In-Class Demo 3.2

* [NYC Rentals]. This is another exercise in brushing (an old HW problem)

* Demo link: [https://go.wisc.edu/4vt23t](https://go.wisc.edu/4vt23t)

---

### Exercise 3.2

* With your project team, work through [Guided Literature Search] in the exercises
sheet.
* You only have to submit answers for [a - b]


---


### October 3, 2023

1. Intro to D3 / Workflow Setup
1. In-Class Demo 4.1
1. In-Class Exercise 4.1

---

### Announcements

1. Solutions to Problem Set 1 will be posted after the final deadline for late
assignments. Consider reviewing even if you understood exercises -- you might
find alternative solutions or ways to improve the presentation of your
submission.
1. Problem Set 2 is posted and [Due October 23]
1. Start early! The midterm is in-class on October 26.

---

### Introduction to D3

1. D3 is a visualization library written in javascript.
1. It operates at a much lower level than R / ggplot2. This both makes it much
more flexible, but also requires more effort to work with.
1. Unlike Shiny, it can modify visualizations in place, since it doesn't depend
on transitions between static image views.

---

Smooth transitions in a barchart, from the D3 collection on [Observable](https://observablehq.com/@d3/bar-chart-transitions).

&lt;iframe width="100%" height="550"
  src="https://observablehq.com/embed/@d3/sortable-bar-chart?cell=viewof+order&amp;cell=chart"&gt;&lt;/iframe&gt;

---

A D3-based
[animation](https://observablehq.com/@mbostock/connected-particles-iii) written
by the original developer of D3, Mike Bostock.

&lt;iframe width="100%" height="550" frameborder="0"
  src="https://observablehq.com/embed/@mbostock/connected-particles-iii?cells=canvas%2Cn%2Cheight%2Cradius"&gt;&lt;/iframe&gt;

---

.pull-left[
A [narrative visualization](http://www.r2d3.us/visual-intro-to-machine-learning-part-1/) introducing machine learning to a broader audience.
]

&lt;img src="figures/leaf_nodes.png" width=800/&gt;

---

### Workflow Setup

1. To build D3 visualizations, we will mainly be editing `.html`, `.css`, and
`.js` files. This can be done in Rstudio, but other text editors work as well
(e.g., VSCode, Atom, Emacs, ...).
1. You will not need it this week, but starting next week, you will need to have
a python installation on your computer. This will be used to start a server
needed for loading data.
1. It's possible to incorporate D3 visualizations into Rmarkdown reports and
Shiny Apps. It is a somewhat more advanced topic, and we will only briefly touch
on this.

---

### Workflow Setup

Let's test our setup by editing a simple [HTML
file](https://github.com/krisrs1128/stat992_f23/blob/main/examples/week4/week4-1/example_headings.html).
Work with your neighbors in case you have any difficulty.


```html
&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;This is a Header&lt;/h1&gt;
    &lt;p&gt;This text is in a paragraph&lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;
```

---

### Workflow Setup

1. Let's make sure you can add a `.js` file to do some computation in the
background.
1. You'll also want to be able to use your browser's developer tools. 

.pull-left[
`example_headings.html`

```html
&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;This is a Header&lt;/h1&gt;
    &lt;p&gt;This text is in a paragraph&lt;/p&gt;
  &lt;/body&gt;
  &lt;script src="example.js"&gt;&lt;/script&gt;
&lt;/html&gt;
```
]

.pull-right[
`example.js`

```js
let x = [1, 2, 3];
console.log(x);
```


&lt;script&gt;
let x = [1, 2, 3];
console.log(x);
&lt;/script&gt;
]

---

### Code Demo 4.1 [Draw a Smiley Face]

This is an exercise in manipulating SVGs to draw a custom shape.

* Link: [https://go.wisc.edu/99c43g](https://go.wisc.edu/99c43g)

---

### In-Class Exercise 4.1 [Penguins Array Manipulation a - b]

[Penguins Array Manipulation] - Only parts (a, b)

* When you write your solution, you can still use `.Rmd` documents, but set
`eval = FALSE` in any `js` code blocks so that Rstudio doesn't try to compile
the code.
* Hint: For part (b), refer to the example in Notes 4 - 2. For part (c), a one
line solution is possible using `map()`.

---

### October 5, 2023

1. Exercise review 4.1
1. In-Class Demo 4.2
1. Discussion
1. In-Class Exercise 4.2

---

### Announcements

1. Project Milestone 1 is due [October 16]
1. Problem Set 2 is due [October 23]
1. Practice midterm and solutions have been posted. The midterm will be in-class on [October 26].
1. [Additional javascript resource](https://observablehq.com/@observablehq/learn-javascript-introduction)

---

### Exercise Review

For each of `penguins` and `penguins2`, describe whether the data structure is
(i) an object of arrays, (ii) an array of objects, or (iii) neither. In case
(iii), specify the structure.

* `penguins` is an array of objects. Each object corresponds to one row
(sample), and the array gives the full dataset.


```r
let penguins = [{"species":"Adelie","island":"Torgersen",...},{"species":"Adelie","island":"Torgersen",...}, ...]
```

---

### Exercise Review

For each of `penguins` and `penguins2`, describe whether the data structure is
(i) an object of arrays, (ii) an array of objects, or (iii) neither. In case
(iii), specify the structure.

* `penguins2` is an object of arrays. Each key of the object corresponds to one
column, and the associated array gives all penguins' measurements for that
column.


```r
let penguins2 = {"species":["Adelie","Adelie",...],"island":["Torgersen","Torgersen",...],...}
```

---

### Exercise Review

Using `penguins2`, compute the mean flipper length.

For this part, we need to (i) extract the array within the object containing flipper length, and (ii) compute its mean.


```r
d3.mean(penguins2["flipper_length_mm"])
```

---

### Exercise Review

Using `penguins`, define a new array whose elements are `true` or `false`
depending on whether flipper length is larger than 187.

We can accomplish this using a for loop.


```r
let result = [];
for (let i = 0; i &lt; penguins.length; i++) {
  result.push(penguins[i].flipper_length_mm &gt; 187)
}
```

---

### Exercise Review

Using `penguins`, define a new array whose elements are `true` or `false`
depending on whether flipper length is larger than 187.

An even more concise solution uses `map`.


```r
result = penguins.map(d =&gt; d.flipper_length_mm &gt; 187)
```

---

### Exercise Review

* This is how the solution looks like in a single javascript file
* For in-class exercises like this, it is enough to submit your HTML, CSS, and
JS files. Any discussion can go in JS comments or HTML paragraphs.

---

### Discussion

With others at your table, discuss any (or all) of the following prompts for
6 - 8 minutes.

* What originally motivated you to learn data visualization?
* Which of your personal values are reflected in your visualization interests?
* How might learning javascript or D3 relate to these original motivations / values?

---

### In-Class Demo [4.2]

* We will work through [Modifying Selections] together

* [https://go.wisc.edu/96bu43](https://go.wisc.edu/96bu43)

---

### In-Class Exercise [4.2]

* Work through [Debugging JS Code] parts (b - d) in the exercises sheet. Discuss
with your team, but submit individually.

---


### October 10, 2023

1. Exercise review 4.2
1. Discussion 5.1
1. In-Class Demo 5.1
1. In-Class Exercise 5.1

---

### Announcements

1. Wednesday OH are moved to 9:45 - 11am
1. Project Milestone 1 is due [October 16]
1. Problem Set 2 is due [October 23]
1. Midterm 2 will be held in-class on [October 26]
    * An example midterm + solutions has been posted. 
    * The content and format will be similar (multiple T/F, pseudocode writing,
    and discussion).
    * The instructions will be the same. E.g., you may use a one page cheat
    sheet.

---

### Beautiful Visualizations

Some generative art examples:

* [https://openprocessing.org/sketch/1558921/](https://openprocessing.org/sketch/1558921/)
* [https://openprocessing.org/sketch/1270538/](https://openprocessing.org/sketch/1270538/)
* [https://openprocessing.org/sketch/1608326/](https://openprocessing.org/sketch/1608326/)

---

### Exercise Review 

Goal: I want to try to get the average of the “temp_max” array in
“forecast” below.

Attempt: Here is my [HTML](https://github.com/krisrs1128/stat992_f23/blob/main/activities/week4/in_class4-2a.html) and [JS](https://github.com/krisrs1128/stat992_f23/blob/main/activities/week4/in_class4-2a.js) file. This is the part that I think is
relevant,

```r
let forecast = {temp_max: [22, 24, 28, 21], temp_min: [15, 14, 21, 24]}
d3.mean(forecast[0])
```
Problem: The console prints the error message,
```
 Uncaught TypeError: t is not iterable at t.mean (d3-array@3:2:13861) at in_class4-2a.js:3:4 
```

---

### Exercise Review (part a, not required)

Solution: To index into objects, we need to use a key.


```r
d3.mean(forecast["temp_max"])
```

---

### Exercise Review (part b)

b. Goal: I want to change the color of all the circles on my [HTML page](https://github.com/krisrs1128/stat992_f23/blob/main/activities/week4/in_class4-2b.html) to blue. 

Attempt:
Here is my [HTML](https://github.com/krisrs1128/stat992_f23/blob/main/activities/week4/in_class4-2b.html) and [JS](https://github.com/krisrs1128/stat992_f23/blob/main/activities/week4/in_class4-2b.js) file. This is the part that I think is relevant,

```r
d3.select("circle")
  .attr("fill", "blue")
```
Problem: Only the color of the one circle [is changing](https://github.com/krisrs1128/stat679_code/blob/main/exercises/figure/d3_bugs.png).

---

### Exercise Review (part b)

Solution: If there are multiple matches, `d3.select` will only select the first
element. We need to use `d3.selectAll`.


```r
d3.selectAll("circle")
  .attr("fill", "blue")
```

---

### Exercise Review (part c)

Goal: I want to change the color of all the class “highlighted” squares.

Attempt: Here is my [HTML](https://github.com/krisrs1128/stat992_f23/blob/main/activities/week4/in_class4-2c.html) and [JS](https://github.com/krisrs1128/stat992_f23/blob/main/activities/week4/in_class4-2c.js) file. This is the part that I think is relevant,

```r
d3.selectAll("highlighted")
  .attr("fill", "red")
```
Problem: Nothing is changing.

---

### Exercise Review (part c)

Solution: Class selectors need to be preceded by a period. The code below would
work,


```r
d3.selectAll(".highlighted")
  .attr("fill", "red")
```

---

### Exercise Review (part d)

Goal: I want to move the circle to location 100, 200 on the SVG canvas.
    
Attempt: Here is my [HTML](https://github.com/krisrs1128/stat992_f23/blob/main/activities/week4/in_class4-2d.html) and [JS](https://github.com/krisrs1128/stat992_f23/blob/main/activities/week4/in_class4-2d.js) file. This is the part that I think is relevant,

```r
d3.select("#my_circle")
  .attrs({ x: 100, y: 200 })
```
Problem: It is not moving.

---

### Exercise Review (part d)

Solution: The position of SVG circles is set by attributes called `cx` and `cy`, not `x`
and `y`.


```r
d3.select("#my_circle")
  .attrs({ cx: 100, cy: 200 })
```

---

### Discussion

What are some technical or analytical skills you feel (i) you have improved in
or (ii) you would like to develop further? What kinds of practice might help
with (ii)?

* Please write your thoughts at [https://go.wisc.edu/q88x30]( https://go.wisc.edu/q88x30)
* If someone writes something you also felt, add a +1 (or +2, ...)
* I will ask teams to share their thoughts.

---


### In-Class Demo [5.1]

* We will work through [Marching Circles] together

* [https://go.wisc.edu/n41y41](https://go.wisc.edu/n41y41)

---

### In-Class Exercise [5.1]

In this exercise, we'll brainstorm and share feedback about one another's
upcoming project milestones.

* Summarize your discussion at [https://go.wisc.edu/j20197](https://go.wisc.edu/j20197)
* Also submit your notes to Canvas

---

### October 12, 2023

1. Exercise review 5.1
1. In-Class Demo 5.2
1. In-Class Exercise 5.2

---

### Announcements

1. Project Milestone 1 is due [October 16]
1. Problem Set 2 is due [October 23]
1. Midterm 2 will be held in-class on [October 26]

---

### Beautiful Visualizations

[Only 6% of the Nobel Prize Winners are women](https://observablehq.com/@irenedelatorre/only-6-of-the-nobel-prize-winners-are-women?collection=@irenedelatorre/d3-js)

---

### Exercise Review

1. For dataset size: If visualizing a very large dataset, some summarization will be necessary
  - E.g., [geom_bin2d](https://tidyverse.github.io/ggplot2-docs/reference/geom_bin2d.html) or [geom_hex](https://ggplot2.tidyverse.org/reference/geom_hex.html)
1. For choosing data or a problem, imitation can be a valuable strategy. Is
there an analysis you have seen that you like, and can you adapt it to a setting
you care about?
1. Creative idea from one team -- use ChatGPT to brainstorm problems and datasets
  - Can also be interesting to consider the opposite of generic LLM responses...
1. Please don't overthink the project. Imagine it as a blog post or letter.

---

### In-Class Demo [5.2]

* We will work through [Random Walk with Links] together

* [https://go.wisc.edu/y1n2x5](https://go.wisc.edu/y1n2x5)

---

### In-Class Exercise [5.2]

With your group, prepare one practice midterm problem and solution. 
* Potential question types: Multiple TRUE / FALSE, writing psueodocode, discussion / critique
* Potential question sources: Course readings, course notes, past in-class
exercises or problem sets

* Share your team's work at [https://go.wisc.edu/20v0d2](https://go.wisc.edu/20v0d2) so that others can study from your questions
* Also upload your slide to Canvas

---
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
